## Instructions

### 1. f-scratch Pull Request Guidelines
- When creating a pull request for f-scratch repositories:
  - **Always use the official template** from https://github.com/f-scratch/.github/blob/master/.github/PULL_REQUEST_TEMPLATE.md
  - **Write the PR description in Japanese**
  - **Fill in all sections that you understand** - it's okay to leave sections blank if you don't have the information
  - **Push the current branch first** before attempting to create a pull request
  - **Ask about uncommitted changes** if there are any uncommitted files
  - **Note that the default branch** in f-scratch repositories is usually `develop` (not `main` or `master`)
  - **Include the 改修ID** (e.g., IMP_000001) in the title of the pull request
    - You can usually extract this from the branch name
    - If you're unsure, you may skip this step
    - Always place the ID in square brackets at the beginning of the title
    - Example: `[IMP_KP104267] 経営データのグラフパネルで右軸を0（ゼロ）のデータで設定する場合、グラフにて0.0で表示される問題を修正`
  - **Write the title in Japanese**

### 2. ID Formats and Conventions
- **Modification IDs (改修ID):**
  - Format: `IMP_000001`
  - **Every development task has a modification ID**
  - **Always include the modification ID at the beginning of PR titles**
  - The modification ID is typically included in the working branch name

- **Development Target IDs (開発対象ID):**
  - Format: `KP3_0001`
  - Assigned to non-bug fix developments

- **NG IDs (NG ID):**
  - Format: `kp_ng_000001`
  - Assigned to bug fix developments

- **When any of these IDs appear in issues or pull requests:**
  - Understand their meaning and context
  - Use them appropriately in your work
  - Reference them correctly in all related documentation

### 3. Documentation Attribution
- **Always include a footer** in pull requests and issues
  - Add a note such as "Generated by Cascade" at the bottom of the content
  - This helps identify AI-assisted contributions

### 4. Issue Management
- **Do not create an issue unless the user requests it or you suggest it and they approve.**  
- **Strictly use the same issue throughout the task.** Do not create new ones unnecessarily.  
- When working on an issue, **always update it instead of opening a new one.**  
- **Link relevant issues** whenever creating a new issue or PR.  

### 5. Using Issues for Memory
- **Refer to past comments in the issue** to maintain context.  
- When updating progress:
  - **Modify previous comments if relevant** instead of always adding a new post.  
  - If a new post is necessary, keep it **concise** and **only include essential information.**  

### 6. GitHub Workflow & Commands
- Ensure that:
  - **GitHub issues and PRs are correctly linked** for traceability.  
  - **All commands follow best practices** (e.g., meaningful commit messages, clean issue updates).  

### 7. Code Modifications
- Modify the existing codebase **without creating a new branch** unless instructed.  
- Follow **project conventions** and minimize unnecessary modifications.  
- **Use incremental commits** to make changes traceable.

### 8. Troubleshooting & Reporting
- **If you get stuck, report your situation in the issue concisely.**  
- **Only include relevant details**—keep it short and to the point.  
- Example:  
  ✅ `"Encountered a permissions error when accessing the repo. Investigating."`  
  ❌ `"I'm having trouble because I can't access the repo. I'm checking different authentication methods, trying to log in again, and running various tests to debug it."`  

### 9. Workflow Summary
1. **User requests a task** → AI suggests an issue if necessary.  
2. **If an issue exists, AI continues using it.** No duplicate issues.  
3. **AI modifies code** in the appropriate branch.  
4. **AI updates the issue** (editing previous posts when necessary).  
5. **AI references previous posts** to maintain continuity.  
6. **AI links related issues in any new issue or PR.**  
7. **User reviews & provides feedback** → AI refines the solution accordingly.  
8. **Once the task is completed**, AI confirms with the user before closing the issue.  

## Constraints & Best Practices
- **Use the same issue throughout the task.** Never create duplicates.  
- **Edit existing posts when possible** instead of always adding new ones.  
- **Reference previous comments** in the issue for context.  
- **Keep troubleshooting reports brief** and **to the point.**  
- Follow **Git best practices** and ensure clean, well-structured commits.  
